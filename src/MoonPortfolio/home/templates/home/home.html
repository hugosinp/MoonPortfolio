{% extends 'home/base.html' %}
{% load static %}
{% load humanize %}

{% block title %}
MoonPortfolio
{% endblock %}

{% block styles %}
{% endblock %}

{% block body %}
<div class="container">
  <div class="row m-5">
    <div class="container ">
      <div class="row mt-5 mb-5">
              <div class="col">
                <h1>The Best MoonPortfolio</h1>
                <h5>User-Friendly Asset Manager which allows users to easily manage their assets whatever the broker is !</br></br>
                  A MoonUser can :
                  <ul>
                    <li>Create a portfolio</li>
                    <li>Add new Assets</li>
                    <li>Add transactions (Buy, Sell, Convert, Transfer)</li>
                    <li>Follow his portfolio's activity</li>
                    <li>Manage his expenses</li>
                  <ul>
                </h5>
                </br>
                <a class="btn btn-primary" href="{% url 'register' %}">Create my Portfolio now !</a>
              </div>
              <div class="col">
                <img src="{% static 'img/wallet.svg' %}" alt="" width="150%" height="90%" class="d-inline-block align-text-top">
              </div>
      </div>
    </div>



    <div class="container mt-5 mb-5">
                  <table class="table table-hover table-bordered table-dark" id="coins" cellspacing="0" width="100%">
                      <thead>
                          <tr>
                              <th scope='col'>#</th>
                              <th scope='col'>Name</th>
                              <th scope='col'>Price / 24h Change</th>
                              <th scope='col'>Market Cap</th>
                          </tr>
                      </thead>
                      <tbody>
                          {% if data %}
                              {% for coin in data %}
                                  <tr>
                                      <td class='align-middle'>{{ coin.market_cap_rank }}</td>
                                      <td class='align-middle'>
                                          <a style="text-decoration: none; color: white;" href="asset/{{ coin.symbol }}" target="blank">
                                              <img src={{ coin.image }} height='40' style="padding-right: 3%;">
                                              <span class="font-weight-bold">{{ coin.name }}</span> 
                                              <span class="badge bg-dark text-uppercase text-light">{{ coin.symbol }}</span> 
                                          </a>
                                      </td>
                                      <td class='align-middle'>
                                          {{ coin.current_price|intcomma }} $USD 
                                          {% if coin.price_change_percentage_24h >= 0 %}
                                              <span class="text-success" style="color=green;">(+{{ coin.price_change_percentage_24h|floatformat:"2" }}%)</span>
                                              <img src="{% static 'img/up.png' %}" alt="" width="15" height="15"> 
                                          {% elif coin.price_change_percentage_24h < 0 %}
                                              <span class="text-danger">({{ coin.price_change_percentage_24h|floatformat:"2" }}%)</span>
                                              <img src="{% static 'img/down.png' %}" alt="" width="15" height="15"> 
                                          {% endif %}
                                      </td>
                                      <td class='align-middle'>{{ coin.market_cap|intcomma }} $USD</td>
                                  </tr>
                              {% endfor %}
                          {% else %}
                              <h3>No data from CoinGecko</h3>
                          {% endif %}

                      </tbody>
                  </table>
    </div>
  </div>
</div>

<script>
  $(document).ready(function () {
    $('#coins').DataTable();
    $('.dataTables_length').addClass('bs-select');
  });
</script>
{% endblock %}



