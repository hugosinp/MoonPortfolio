{% extends 'home/base_logged.html' %}
{% load static %}
{% load humanize %}
{% load mathfilters %}

{% block title %}
MoonPortfolio | {% for coin in data %} {% if coin.symbol == asset_symbol %} {{coin.name }} {% endif %} {% endfor %}
{% endblock %}

{% block styles %}
{% endblock %}

{% block body %}

<div class="container">
    <div class="row m-5">

        <div class="container">
          <p><a href="{% url 'market_simplified' %}">Market</a> > <a href="">{% for coin in data %} {% if coin.symbol == asset_symbol %} {{coin.name }} {% endif %} {% endfor %} <img src="{% for coin in data %} {% if coin.symbol == asset_symbol %} {{coin.image }} {% endif %} {% endfor %}" style="max-height:2%; width:2%; object-fit: contain;" class="img-fluid" alt="Responsive image"></a></p>
          <div class="row">
                          
            <div class="card" style="width: 100%;">
              <div class="card-body">
                <div class="row">
                  <div class="col-4 ml-4">
                    <h3 class="card-title">
                      <img src="{% for coin in data %} {% if coin.symbol == asset_symbol %} {{coin.image }} {% endif %} {% endfor %}" style="height:50%; width:15%; object-fit: contain;" alt="Responsive image">
                      {% for coin in data %} {% if coin.symbol == asset_symbol %} {{coin.name }} {% endif %} {% endfor %} 
                      <span class="badge bg-dark text-uppercase text-light">{% for coin in data %} {% if coin.symbol == asset_symbol %} {{coin.symbol }} {% endif %} {% endfor %}</span>
                    </h3>
                    <h6 class="card-subtitle mb-2 text-muted">
                      Rank -> #{% for coin in data %} {% if coin.symbol == asset_symbol %} {{coin.market_cap_rank }} {% endif %} {% endfor %}
                    </h6>
                    <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                    <a href="#" class="card-link">Official Website</a>
                  </div>
    
                  <div class="col">
                    {% for coin in data %}
                      {% if coin.symbol == asset_symbol %}
                        <h3 class=""> {{coin.name }} Price <h2>
                        <span class="badge bg-secondary text-light">{{ coin.current_price|intcomma }} $</span>
                        <h3 class="mt-3">Market Cap<h2>
                        <span class="badge bg-secondary text-light">{{ coin.market_cap|intcomma }} $</span>
                      {% endif %}
                    {% endfor %}
                  </div>
                  <div class="col">
                      {% for coin in data %}
                        {% if coin.symbol == asset_symbol %}
                    <div class="row">

                          <div class="col">
                            <h4 class="">ATH</h4>
                            <span class="badge bg-secondary text-light">{{ coin.ath|intcomma }} $</span>
                          </div>
                          <div class="col">
                            <h4 class="">ATL</h4>
                            <span class="badge bg-secondary text-light">{{ coin.atl|intcomma }} $</span>
                          </div>
                    </div>
                        <h4 class="mt-3">Circulating supply : </h4>
                        <span class="badge bg-secondary text-light">{{ coin.circulating_supply|div:coin.max_supply|mul:100 }}%</span>
                        <div class="progress">
                          <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" style="width: {{ coin.circulating_supply|div:coin.max_supply|mul:100 }}%"></div>
                        </div>
                        <h6>Circulating Supply : {{ coin.circulating_supply|intcomma }}</h6>
                        <h6>Max Supply : {{ coin.max_supply|intcomma }}</h6>

                      {% endif %}
                    {% endfor %}
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="row mt-5">  
            <!-- TradingView Widget BEGIN -->
            <div class="tradingview-widget-container">
              <div id="tradingview_dc5d2"></div>
              <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
              <script type="text/javascript">
                new TradingView.widget(
                {
                "width": 980,
                "height": 610,
                "symbol": "KRAKEN:ADAUSDT",
                "interval": "D",
                "timezone": "Etc/UTC",
                "theme": "dark",
                "style": "1",
                "locale": "fr",
                "toolbar_bg": "#f1f3f6",
                "enable_publishing": false,
                "allow_symbol_change": true,
                "container_id": "tradingview_dc5d2"
              }
                );
              </script>
            </div>
            <!-- TradingView Widget END -->

          </div>
        </div>
    </div>
</div>

{% endblock %}